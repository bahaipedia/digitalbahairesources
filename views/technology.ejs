<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Technology</title>
    <link rel="stylesheet" href="/styles.css">
    <link rel="icon" href="images/dbs-favicon.png" type="image/png">
</head>
<body>
    <%- include('partials/header', { mini: false }) %>
    <main>
        <section class="content-area">
            <h1>Technology</h1>
            <p>This page provides an overview of the technology and infrastructure used to run our sites.</p>

            <h2>Platform and Software</h2>
            <p>Our wikis, such as Bahaipedia, run on MediaWiki, the same software platform used by Wikipedia.</p>
            
            <h2>Infrastructure and Hosting</h2>
            <p>Our servers are distributed across four regions: Virginia (United States), Singapore, São Paulo, and Frankfurt.</p>

            <h3>File Hosting and Distribution</h3>
            <p>Files uploaded to <a href="https://bahai.media" target="_blank">bahai.media</a> are replicated to storage in Virginia, Brazil, Singapore, and Germany. Each region acts as an origin server for our Content Delivery Network (CDN), CloudFront, which caches files to reduce download times.</p>
            <p>Uploads are processed in the nearest region and then replicated to all other regions.</p>

            <h2>Traffic Handling and Caching</h2>
            <p>We use a multi-layered caching strategy, primarily with Varnish and Redis, to manage traffic and reduce server load.</p>

                        <h3>How We Handle Traffic</h3>
            <p>Our technology stack routes and manages traffic using the following components:</p>
            <ul>
                <li><strong>Nginx</strong>: Acts as the primary web server and reverse proxy, handling HTTPS traffic and forwarding requests to Varnish.</li>
                <li><strong>Varnish</strong>: Caches pages for anonymous users to reduce backend load.</li>
                <li><strong>Redis</strong>: A secondary cache (primarily for logged-in users) used for storing application data and user sessions.</li>
                <li><strong>Elasticsearch</strong>: Provides full-text search capabilities.</li>
                <li><strong>CloudFront</strong>: Our CDN, which caches and distributes static assets (images, videos, documents) to reduce latency.</li>
                <li><strong>AWS Lambda</strong>: Routes <a href="https://github.com/bahaipedia/lambda-edge-detect-origin">CDN cache misses</a> to the closest geographic origin server and assists with post-upload <a href="https://github.com/bahaipedia/lambda-bahaimedia-distribute-s3">file distribution</a>.</li>
                <li><strong>Ansible and GitHub</strong>: Configuration files are managed in GitHub. Ansible is used to automate server configuration and deploy updates across all regions.</li>
            </ul>

            <h2>Custom Extensions and Code</h2>
            <p>We develop custom MediaWiki extensions to add specific features to our wikis.</p>
            <p>Our code, including these extensions, is available in our <a href="https://github.com/bahaipedia" target="_blank">GitHub repository</a>.</p>
        </section>
    </main>
    <%- include('partials/footer') %>
</body>
</html>
